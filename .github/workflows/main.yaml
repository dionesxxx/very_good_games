name: very_good_games

on: [pull_request, push]

jobs:

  verify-very_good_games_repository:
    uses: VeryGoodOpenSource/very_good_workflows/.github/workflows/dart_package.yml@v1
    with:
      dart_sdk: "stable"
      coverage_excludes: "*.g.dart"
      working_directory: "packages/very_good_games_repository"
  
  verify-very_good_remote_games_api:
    uses: VeryGoodOpenSource/very_good_workflows/.github/workflows/flutter_package.yml@v1
    with:
      coverage_excludes: "*.g.dart"
      working_directory: "packages/very_good_remote_games_api"
      flutter_channel: stable
      flutter_version: 3.0.4
      min_coverage: 1
  
  verify-application:
    uses: VeryGoodOpenSource/very_good_workflows/.github/workflows/flutter_package.yml@v1
    with:
      coverage_excludes: "*.g.dart"
      flutter_channel: stable
      flutter_version: 3.0.4

  verify-semantic-pull-request:
    uses: VeryGoodOpenSource/very_good_workflows/.github/workflows/semantic_pull_request.yml@v1

  build:
    needs:
      [
        verify-very_good_games_repository,
        verify-very_good_remote_games_api,
        verify-application,
        verify-semantic-pull-request,
      ]

    runs-on: ubuntu-latest

    steps:
      - name: noop
        run: echo 'noop'
